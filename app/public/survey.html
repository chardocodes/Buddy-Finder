<!DOCTYPE html>
<html>
<html lang="en">
<meta charset="UTF-8">

<head>
	<title>Buddy Finder Compatibility Match</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"></script>

</head>

<body style="background-image: url('https://cdn.pixabay.com/photo/2014/09/24/16/28/bricks-459299__340.jpg')">
	<div style="background-image: url('https://i.pinimg.com/originals/87/0b/06/870b06ba00f1e387708e32ba1019a6bc.jpg')">
	</div>
	<div class="container">
		<div class="jumbotron" >

			<h1>A Buddy Finder Survey</h1>
			<hr>
			<h4>Ten questions about you</h4>
			<h4>Then meet the new pal we've matched you with!</h4>
			<hr>

			<form>
				<div class="form-group">
					<label for="userName">Your Name (Required)</label>
					<input type="text" class="form-control" id="friendName" placeholder="Enter Your Name">
				</div>

				<div class="input-group mb-3">
					<div class="custom-file">
						<input type="file" class="custom-file-input" id="inputGroupFile02 ">
						<label class="custom-file-label" for="inputGroupFile02">Choose file</label>
					</div>
					<div class="input-group-append">
						<span class="input-group-text" id="friendImg">Upload</span>
					</div>
				</div>
				<hr>

				<h5>Instructions: Read the question then answer by choosing a number between 1 (Strongly Disagree) and 5
					(Strongly Agree) from the dropdown.</h5>
				<br>
				<div class="form-group">
					<label for="question1">Question 1: Do you like diet sodas?</label>
					<select class="form-control" id="question1">
						<option value>Select an option</option>
						<option value=1>1 (Strongly Disagree)</option>
						<option value=2>2</option>
						<option value=3>3</option>
						<option value=4>4</option>
						<option value=5>5 (Strongly Agree)</option>
					</select>
				</div>
				<div class="form-group">
					<label for="question2">Question 2: Do you smoke cigarettes?</label>
					<select class="form-control" id="question2">
						<option value>Select an option</option>
						<option value=1>1 (Strongly Disagree)</option>
						<option value=2>2</option>
						<option value=3>3</option>
						<option value=4>4</option>
						<option value=5>5 (Strongly Agree)</option>
					</select>
				</div>
				<div class="form-group">
					<label for="question3">Question 3: Do you like recreating outdoors?</label>
					<select class="form-control" id="question3">
						<option value>Select an option</option>
						<option value=1>1 (Strongly Disagree)</option>
						<option value=2>2</option>
						<option value=3>3</option>
						<option value=4>4</option>
						<option value=5>5 (Strongly Agree)</option>
					</select>
				</div>
				<div class="form-group">
					<label for="question4">Question 4: Do you like playing video games?</label>
					<select class="form-control" id="question4">
						<option value>Select an option</option>
						<option value=1>1 (Strongly Disagree)</option>
						<option value=2>2</option>
						<option value=3>3</option>
						<option value=4>4</option>
						<option value=5>5 (Strongly Agree)</option>
					</select>
				</div>
				<div class="form-group">
					<label for="question5">Question 5: Would you consider yourself to be a patient person?</label>
					<select class="form-control" id="question5">
						<option value>Select an option</option>
						<option value=1>1 (Strongly Disagree)</option>
						<option value=2>2</option>
						<option value=3>3</option>
						<option value=4>4</option>
						<option value=5>5 (Strongly Agree)</option>
					</select>
				</div>
				<div class="form-group">
					<label for="question6">Question 6: Do you like cats?</label>
					<select class="form-control" id="question6">
						<option value>Select an option</option>
						<option value=1>1 (Strongly Disagree)</option>
						<option value=2>2</option>
						<option value=3>3</option>
						<option value=4>4</option>
						<option value=5>5 (Strongly Agree)</option>
					</select>
				</div>
				<div class="form-group">
					<label for="question7">Question 7: Do you like President Trump?</label>
					<select class="form-control" id="question7">
						<option value>Select an option</option>
						<option value=1>1 (Strongly Disagree)</option>
						<option value=2>2</option>
						<option value=3>3</option>
						<option value=4>4</option>
						<option value=5>5 (Strongly Agree)</option>
					</select>
				</div>
				<div class="form-group">
					<label for="question8">Question 8: Are you close with your family?</label>
					<select class="form-control" id="question8">
						<option value>Select an option</option>
						<option value=1>1 (Strongly Disagree)</option>
						<option value=2>2</option>
						<option value=3>3</option>
						<option value=4>4</option>
						<option value=5>5 (Strongly Agree)</option>
					</select>
				</div>
				<div class="form-group">
					<label for="question9">Question 9: Have you ever traveled outside of the US?</label>
					<select class="form-control" id="question9">
						<option value>Select an option</option>
						<option value=1>1 (Strongly Disagree)</option>
						<option value=2>2</option>
						<option value=3>3</option>
						<option value=4>4</option>
						<option value=5>5 (Strongly Agree)</option>
					</select>
				</div>
				<div class="form-group">
					<label for="question10">Question 10: Do you have a bucket list?</label>
					<select class="form-control" id="question10">
						<option value>Select an option</option>
						<option value=1>1 (Strongly Disagree)</option>
						<option value=2>2</option>
						<option value=3>3</option>
						<option value=4>4</option>
						<option value=5>5 (Strongly Agree)</option>
					</select>
				</div>
				<br>
				<button type="submit" class="btn btn-primary submit"><i class="far fa-check-square"></i> Submit
					Survey</button>
			</form>

		</div>
	</div>

	<footer>
		<div class="container">
			<p><a href="/api/friends">API Friends Link</a> | <a
					href="https://github.com/chardocodes/Buddy-Finder">GitHub Repo</a></p>
		</div>
	</footer>

	<div class="modal" id="executeModal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h3 class="modal-title">Friend Match</h3>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<h4>Your new friend's name is: <span id="bestName"></span></h4>
					<img id="bestImg">

				</div>
				<div class="modal-footer">

					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
</body>

</html>

<script type="text/javascript">
	$(".submit").on("click", function (event) {
		//prevent it from erasing data before it is captured
		event.preventDefault();
		alert("Thank you for submitting to the FriendFinder Survey");
		// Here we grab the form elements
		//the question values are returning undefined
		var newFriend = {
			newName: $("#friendName").val().trim(),
			newImg: $("#friendImg").val().trim(),
			scores: [
				$("#question1").val(),
				$("#question2").val(),
				$("#question3").val(),
				$("#question4").val(),
				$("#question5").val(),
				$("#question6").val(),
				$("#question7").val(),
				$("#question8").val(),
				$("#question9").val(),
				$("#question10").val()
			]
		};
		//log newFriend captured from form
		//console.log(newFriend);
		//console.log(newFriend.newName);
		//this is what I need to do the friend match up
		//console.log(newFriend.scores);
		//console.log(newFriend[0].score);
		$.post("/api/friends", newFriend,
			function (data) {
				// If a best friend match is found
				if (data) {
					//alert("Yay! You are part of the FriendFinder Network, please wait for your best friend match!");
					$('#bestName').text(data.name);
					$('#bestImg').attr("src", data.img).addClass("img-fluid");
					//show modal with best friend match
					$('#executeModal').modal('toggle');
					//   $('#myModal').on('shown.bs.modal', function () {
					// 	$('#myInput').trigger('focus')
					// })
				}
				// ?
				else {
					alert("Sorry we are having problems, please try again");
				}
				// Clear the form when submitting
				$("#friendName").val("");
				$("#friendImg").val("");
				$("#question1").val("");
				$("#question2").val("");
				$("#question3").val("");
				$("#question4").val("");
				$("#question5").val("");
				$("#question6").val("");
				$("#question7").val("");
				$("#question8").val("");
				$("#question9").val("");
				$("#question10").val("");
			});
	});	
</script>